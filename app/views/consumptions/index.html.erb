<div class="container">

	<div class="row">
		<div class="col-12">
			<h1>Mes consommations d'essence:</h1>
			<hr>
		</div>
	</div>
	<%= form_tag consumptions_path, method: :get do  %>
		<div class="row">
			<div class="col-4">
					<%= text_field_tag "search[date_from]", @search.date_from, class: "datepicker" %>
			</div>
			<div class="col-4">
				<%= text_field_tag "search[date_to]", @search.date_to, class: "datepicker" %>
			</div>

			<div class="col-offset-1 col-3">
				<%= submit_tag "Rechercher", class: "btn btn-primary" %>
			</div>	  
			<% end %>
		</div>
		<hr>

		<div class="row">
			<div class="col-12">
				<table>
					<tr>
						<td>Date</td>
						<td>Magasin</td>
						<td>€/l</td>
						<td>Km</td>
						<td>€ Total</td>
					</tr>

					<% @consumptions.each do |c| %>
							
						<tr>
							<td><%= c.created_at.strftime("%d/%m/%Y") %></td>
							<td><%= c.shop %></td>
							<td><%= c.liter_price %></td>
							<td><%= c.kilometers %></td>
							<td><%= c.total_price %></td>
							<td><%= link_to 'edit', edit_consumption_path(c)  %></td>
							<td><%= link_to 'destroy', consumption_path(c), method: :delete, data: {confirm: 'are you sure?'} %></td>
						</tr>
						
					<% end %>
				</table>
			</div>

		</div>

		<div class="row">
			<div class="col-12">
				<hr>
				<p>Nombre de pleins: <%= @consumptions.count %></p>
				<p>Montant total des consomations: <%= @consumptions.total_price %>€</p>
				<p>Nombre total de kilomètres: <%= @consumptions.total_km %>km </p>
			</div>
		</div>
		<div class="row">
			<div class="col-4">
				<%= link_to "ajouter", new_consumption_path, class: "btn btn-primary btn-lg"  %>
			</div>
		</div>
</div>

<style>
	td {
		padding: 5px;
		width: 200px;
	}
</style>